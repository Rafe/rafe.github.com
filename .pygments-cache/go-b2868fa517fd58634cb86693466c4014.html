<div class="highlight"><pre><span class="p">&lt;/</span><span class="n">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span><span class="k">package</span> <span class="n">main</span><span class="p">&lt;/</span><span class="n">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span><span class="k">import</span> <span class="s">&quot;fmt&quot;</span><span class="p">&lt;/</span><span class="n">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span><span class="k">func</span> <span class="n">counter</span><span class="p">(</span><span class="n">id</span> <span class="nb">int</span><span class="p">,</span> <span class="n">channel</span> <span class="k">chan</span> <span class="nb">int</span><span class="p">,</span> <span class="n">closer</span> <span class="n">bool</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="n">i</span> <span class="p">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&amp;</span><span class="n">lt</span><span class="p">;</span> <span class="mi">10000000</span><span class="p">;</span> <span class="n">i</span><span class="p">++</span> <span class="p">{&lt;/</span><span class="n">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">pre</span><span class="p">&gt;&lt;</span><span class="n">code</span><span class="p">&gt;</span><span class="c1">// send count data to channel</span>
<span class="n">fmt</span><span class="p">.</span><span class="n">Println</span><span class="p">(</span><span class="s">&quot;process&quot;</span><span class="p">,</span> <span class="n">id</span><span class="p">,</span><span class="s">&quot; send&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
<span class="n">channel</span> <span class="p">&amp;</span><span class="n">lt</span><span class="p">;-</span> <span class="mi">1</span>
<span class="p">&lt;/</span><span class="n">code</span><span class="p">&gt;&lt;/</span><span class="n">pre</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span>  <span class="p">}</span>
  <span class="k">if</span> <span class="n">closer</span> <span class="p">{</span> <span class="nb">close</span><span class="p">(</span><span class="n">channel</span> <span class="p">)</span> <span class="p">}</span>
<span class="p">}&lt;/</span><span class="n">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span><span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">channel</span> <span class="p">:=</span> <span class="nb">make</span><span class="p">(</span><span class="k">chan</span> <span class="nb">int</span><span class="p">)</span>
  <span class="k">go</span> <span class="n">counter</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">false</span><span class="p">)</span>
  <span class="k">go</span> <span class="n">counter</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">true</span><span class="p">)&lt;/</span><span class="n">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span>  <span class="n">x</span> <span class="p">:=</span> <span class="mi">0</span>
  <span class="c1">// receiving data from channel</span>
  <span class="k">for</span> <span class="n">i</span> <span class="p">:=</span> <span class="k">range</span> <span class="n">channel</span> <span class="p">{&lt;/</span><span class="n">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">pre</span><span class="p">&gt;&lt;</span><span class="n">code</span><span class="p">&gt;</span><span class="n">fmt</span><span class="p">.</span><span class="n">Println</span><span class="p">(</span><span class="s">&quot;receiving&quot;</span><span class="p">)</span>
<span class="n">x</span> <span class="p">+=</span> <span class="n">i</span>
<span class="p">&lt;/</span><span class="n">code</span><span class="p">&gt;&lt;/</span><span class="n">pre</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span>  <span class="p">}&lt;/</span><span class="n">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span>  <span class="n">fmt</span><span class="p">.</span><span class="n">Println</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="p">}&lt;/</span><span class="n">p</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="n">p</span><span class="p">&gt;</span>
</pre>
</div>
