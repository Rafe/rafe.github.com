<div class="highlight"><pre><span class="o">&lt;</span><span class="sr">/p&gt;</span>

<span class="sr">&lt;p&gt;exports.hashUrl = hashUrl = (url, digits = 5, algorithm = &#39;md5&#39;)-&gt;</span>
<span class="sr">  symbols = &#39;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890&#39;</span>
<span class="sr">  length = symbols.length</span>
<span class="sr">  code = &quot;&quot;&lt;/</span><span class="nb">p</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;</span>  <span class="nb">hash</span> <span class="o">=</span> <span class="n">crypto</span><span class="o">.</span><span class="n">createHash</span><span class="p">(</span><span class="n">algorithm</span><span class="p">)</span><span class="o">&lt;</span><span class="sr">/p&gt;</span>

<span class="sr">&lt;pre&gt;&lt;code&gt;.update(url)</span>
<span class="sr">.digest(&#39;hex&#39;)</span>
<span class="sr">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;</span><span class="sr">/pre&gt;</span>

<span class="sr">&lt;p&gt;  hash_number = parseInt(hash, 16) % Math.pow(length, digits + 1)&lt;/</span><span class="nb">p</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;</span>  <span class="k">while</span> <span class="n">hash_number</span> <span class="o">&gt;=</span> <span class="n">length</span><span class="o">&lt;</span><span class="sr">/p&gt;</span>

<span class="sr">&lt;pre&gt;&lt;code&gt;n = hash_number % length</span>
<span class="sr">code += symbols[n]</span>
<span class="sr">hash_number = parseInt(hash_number /</span> <span class="n">length</span><span class="p">)</span>
<span class="o">&lt;</span><span class="sr">/code&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;</span>  <span class="n">code</span><span class="o">&lt;</span><span class="sr">/p&gt;</span>

<span class="sr">&lt;p&gt;</span>
</pre>
</div>
