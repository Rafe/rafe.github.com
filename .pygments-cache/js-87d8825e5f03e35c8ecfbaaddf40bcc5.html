<div class="highlight"><pre>    <span class="c1">//app.js</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">Todos</span> <span class="o">=</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">Application</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
      <span class="nx">VERSION</span><span class="o">:</span> <span class="s1">&#39;1.0&#39;</span><span class="p">,</span>
      <span class="c1">//binding root element with id=&#39;todoapp&#39;</span>
      <span class="nx">rootElement</span><span class="o">:</span> <span class="s1">&#39;#todoapp&#39;</span><span class="p">,</span>
      <span class="c1">//used as localstroage namespace</span>
      <span class="nx">storeNamespace</span><span class="o">:</span> <span class="s1">&#39;todos-emberjs&#39;</span><span class="p">,</span>
      <span class="c1">// Extend to inherit outlet support</span>
      <span class="nx">ApplicationController</span><span class="o">:</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">Controller</span><span class="p">.</span><span class="nx">extend</span><span class="p">(),</span>
      <span class="nx">ready</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">//initialize router, controller and views</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="c1">//router.js</span>
    <span class="nx">Todos</span><span class="p">.</span><span class="nx">Router</span> <span class="o">=</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">Router</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
      <span class="nx">root</span><span class="o">:</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">Route</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
        <span class="nx">showAll</span><span class="o">:</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">Route</span><span class="p">.</span><span class="nx">transitionTo</span><span class="p">(</span><span class="s1">&#39;index&#39;</span><span class="p">),</span>

        <span class="nx">index</span><span class="o">:</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">Route</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
          <span class="nx">route</span><span class="o">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span>
          <span class="nx">connectOutlets</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">router</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">router</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;applicationController&#39;</span><span class="p">);</span>

            <span class="c1">//get the models, in this example is entriesController</span>
            <span class="c1">//which is an instance of ArrayProxy</span>
            <span class="kd">var</span> <span class="nx">context</span> <span class="o">=</span> <span class="nx">Todos</span><span class="p">.</span><span class="nx">entriesController</span><span class="p">;</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="s1">&#39;filterBy&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>

            <span class="c1">//connect todosController and todosView with context to applicationView.</span>
            <span class="nx">controller</span><span class="p">.</span><span class="nx">connectOutlet</span><span class="p">(</span><span class="s1">&#39;todos&#39;</span><span class="p">,</span> <span class="nx">context</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">});</span>
      <span class="p">})</span>
    <span class="p">});</span>

    <span class="nx">Todos</span><span class="p">.</span><span class="nx">TodosView</span> <span class="o">=</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">CollectionView</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
      <span class="c1">//binding content to todosController.entries</span>
      <span class="nx">contentBinding</span><span class="o">:</span> <span class="s1">&#39;controller.entries&#39;</span>
      <span class="p">...</span>
      <span class="c1">//view class for each todos item</span>
      <span class="nx">itemViewClass</span><span class="o">:</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
        <span class="p">...</span>
        <span class="nx">doubleClick</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">).</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;editing&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="p">...</span>
        <span class="c1">//innerview for editing item</span>
        <span class="nx">ItemEditorView</span><span class="o">:</span> <span class="nx">Ember</span><span class="p">.</span><span class="nx">TextField</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
          <span class="nx">valueBinding</span><span class="o">:</span> <span class="s1">&#39;content.title&#39;</span><span class="p">,</span>
          <span class="p">...</span>
          <span class="nx">change</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
            <span class="k">if</span><span class="p">(</span><span class="nx">Ember</span><span class="p">.</span><span class="nx">empty</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getPath</span><span class="p">(</span><span class="s1">&#39;content.title&#39;</span><span class="p">))){</span>
              <span class="c1">//if no value, remove object from todosController.content</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">getPath</span><span class="p">(</span><span class="s1">&#39;controller.content&#39;</span><span class="p">).</span><span class="nx">removeObject</span><span class="p">(</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">);</span>
              <span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="c1">//if not, update the content</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">).</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">,</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">getPath</span><span class="p">(</span><span class="s1">&#39;content.title&#39;</span><span class="p">).</span><span class="nx">trim</span><span class="p">());</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="nx">whenDone</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">).</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;editing&#39;</span><span class="p">,</span> <span class="nx">flase</span><span class="p">);</span>
          <span class="p">},</span>
          <span class="p">...</span>
        <span class="p">});</span>
      <span class="p">})</span>
    <span class="p">});</span>

    <span class="c1">//todosView:</span>
    <span class="c1">//&lt;script id=&quot;todosTemplate&quot; type=&quot;text/x-handlebars&quot;&gt;</span>
    <span class="c1">//</span>
    <span class="c1">//  </span>
    <span class="c1">//  &lt;label&gt;&lt;/label&gt;</span>
    <span class="c1">//  &lt;button  class=&quot;destroy&quot; &gt;&lt;/button&gt;</span>
    <span class="c1">//</span>
    <span class="c1">//  </span>
    <span class="c1">//</span>
</pre>
</div>
